
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout_Admin.cshtml";

}

@model Winter.ViewModels.GeneralViewModel;
<!--Page Title-->
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<div class="pageheader">
    <h3><i class="fa fa-home"></i> Homepage </h3>
</div>
@if (TempData["Successful"] != null)
{
    <div class="container Alert-Container">
        <div class="panel-alert" style="background-color:whitesmoke;">
            <div class="alert-wrap in">
                <div class="alert alert-success" role="alert">
                    <button class="close" type="button">
                        <i class="fa fa-times-circle"></i>
                    </button>
                    <div class="media">
                        <div class="media-left">
                            <span class="icon-wrap icon-wrap-xs icon-circle alert-icon">
                                <i class="fa fa-thumbs-up fa-lg"></i>
                            </span>
                        </div>
                        <div class="media-body">
                            <h4 class="alert-title">Success Message</h4>
                            <h4 class="alert-message"> <strong>@TempData["Successful"]</strong></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (ViewBag.Failed != null)
{
    <div class="container Alert-Container">
        <div class="panel-alert" style="background-color:whitesmoke;">
            <div class="alert-wrap in">
                <div class="alert alert-danger" role="alert">
                    <button class="close" type="button">
                        <i class="fa fa-times-circle"></i>
                    </button>
                    <div class="media">
                        <div class="media-left">
                            <span class="icon-wrap icon-wrap-xs icon-circle alert-icon">
                                <i class="fa fa-thumbs-down fa-lg"></i>
                            </span>
                        </div>
                        <div class="media-body">
                            <h4 class="alert-title">Error Message</h4>
                            <h4 class="alert-message"><strong>@ViewBag.Failed</strong></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<!--End page title-->
<div id="page-content">
    <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-6 col-xm-12">
            <!--Registered User-->
            <div class="panel media pad-all">
                <div class="media-left">
                    <span class="icon-wrap icon-wrap-sm icon-circle bg-success">
                        <i class="fa fa-user fa-2x"></i>
                    </span>
                </div>
                <div class="media-body">
                    <p class="text-2x mar-no text-thin text-right">@Html.DisplayFor(model => model.UserCount)</p>
                    <p class="h5 mar-no text-right">Registered User</p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-6 col-xm-12">
            <div class="panel media pad-all">
                <div class="media-left">
                    <span class="icon-wrap icon-wrap-sm icon-circle bg-mint">
                        <i class="fa fa-list fa-2x"></i>
                    </span>
                </div>

                <div class="media-body">
                    <p class="text-2x mar-no text-thin text-right">@Html.DisplayFor(model => model.CategoryCount)</p>


                    <p class="h5 mar-no text-right"> Categories</p>
                </div>

            </div>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-6 col-xm-12">
            <div class="panel media pad-all">
                <div class="media-left">
                    <span class="icon-wrap icon-wrap-sm icon-circle bg-warning">
                        <i class="fa fa-product-hunt fa-2x"></i>
                    </span>
                </div>
                <div class="media-body">
                    <p class="text-2x mar-no text-thin text-right">@Html.DisplayFor(model => model.ProductCount)</p>
                    <p class="h5 mar-no text-right">Product</p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-6 col-xm-12">
            <!--New Order-->
            <div class="panel media pad-all">
                <div class="media-left">
                    <span class="icon-wrap icon-wrap-sm icon-circle bg-info">
                        <i class="fa fa-shopping-cart fa-2x"></i>
                    </span>
                </div>
                <div class="media-body">
                    <p class="text-2x mar-no text-thin text-right">@Html.DisplayFor(model => model.OrderCount)</p>
                    <p class="h5 mar-no text-right">New Order</p>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-6">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Avaliable Category</h3>
                </div>
                <div class="panel-body">
                    <!--Hover Rows-->
                    <!--===================================================-->
                    @if (Model.Categories != null && Model.Categories.Count() > 0)
                    {
                        <table id="demo-dt-basic" class="table table-hover table-vcenter">
                            <thead>
                                <tr>
                                    <th class="hidden-xs">Category Name</th>
                                    <th class="hidden-xs">Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Categories)
                                {
                                    <tr>
                                        <td class="hidden-xs">@Html.DisplayFor(modelItem => item.CategoryName)</td>
                                        <td>@Html.DisplayFor(modelItem => item.Description)</td>
                                        <td>
                                            <form method="post" asp-action="DeleteCategory" asp-controller="Admin" asp-route-id="@item.Id">
                                                <a asp-action="CategoryDetails" asp-controller="Admin" asp-route-categoryId="@item.Id"
                                                   class="btn btn-warning btn-icon btn-circle icon-lg fa fa-info"></a>

                                                @*<a data-toggle="modal" data-target="#CategoryDetailsModal" class="btn btn-warning btn-icon btn-circle icon-lg fa fa-info"></a>*@

                                                <a asp-action="Edit_Category" asp-controller="Admin" asp-route-id="@item.Id"
                                                   class="btn btn-mint btn-icon btn-circle icon-lg fa fa-edit"></a>
                                                <button type="submit" class="btn btn-danger btn-icon btn-circle icon-lg fa fa-trash"></button>
                                            </form>
                                        </td>
                                    </tr>
                                    <!-- Modal -->
                                    @*<div class="modal fade" id="CategoryDetailsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        ...
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                        <button type="button" class="btn btn-primary">Edit</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>*@
                                }
                            </tbody>
                        </table>
                    }
                    <!--===================================================-->
                    <!--End Hover Rows-->
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">User Accounts</h3>
                </div>
                <div class="panel-body">
                    <!--Hover Rows-->
                    <!--===================================================-->
                    @if (Model.Users != null && Model.Users.Count() > 0)
                    {
                        <table id="demo-dt-basic" class="table table-hover table-vcenter">
                            <thead>
                                <tr>
                                    <th>Profile</th>
                                    <th class="hidden-xs">Email Address</th>
                                    @*<th>Status</th>*@
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var item in Model.Users)
                                {
                                    <tr>
                                        <td>
                                            <div class="media-object center icon-lg fa fa-user"> </div>
                                        </td>
                                        <td class="hidden-xs">@Html.DisplayFor(modelItem => item.Email)</td>
                                        <td>
                                            <a asp-action="CategoryDetails" asp-controller="Admin" asp-route-id="@item.Id"
                                               class="btn btn-warning btn-icon btn-circle icon-lg fa fa-info"></a>
                                        </td>
                                    </tr>
                                }


                            </tbody>
                        </table>
                    }
                    @*@else{
                        <h2 class="h3 mb-0 text-gray-800">No User Found</h2>
                        }*@
                    <!--===================================================-->
                    <!--End Hover Rows-->
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="col-md-6">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Products</h3>
                </div>
                <div class="panel-body">
                    @if (Model.Products != null && Model.Products.Count() > 0)
                    {
                        <table id="demo-dt-basic" class="table table-hover table-vcenter">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th class="hidden-xs">Product Name</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var product in Model.Products)
                                {
                                    <tr>
                                        <td>
                                            <img src='@Url.Action("DownloadDocument", "Admin", new { Filename = product.ProductFile.FirstOrDefault()?.FileUniqueName }) ' height="60" width="60" />
                                        </td>
                                        <td class="hidden-xs">@Html.DisplayFor(modelItem => product.ProductName)</td>
                                        <td>
                                            <form method="post" asp-action="DeleteProduct" asp-controller="Admin" asp-route-id="@product.ProductId">
                                                <a asp-action="Product_Details" asp-controller="Admin" asp-route-id="@product.ProductId"
                                                   class="btn btn-warning btn-icon btn-circle icon-lg fa fa-info"></a>
                                                <a asp-action="UpdateProduct" asp-controller="Admin" asp-route-id="@product.ProductId"
                                                   class="btn btn-mint btn-icon btn-circle icon-lg fa fa-edit"></a>
                                                <button type="submit" class="btn btn-danger btn-icon btn-circle icon-lg fa fa-trash"></button>
                                            </form>
                                        </td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">
    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 4000);
</script>